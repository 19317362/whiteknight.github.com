---
layout: bloggerpost
title: GC and Other Miscellaneous Cleanups.
---

Spent most of my time this weekend working on more GC cleanups. The work <a href="http://wknight8111.blogspot.com/2009/05/parrot-gc-refactor-work.html">I talked about previously</a> was in improving the API, today I am working to clean up everything behind the curtain. It wasn't without it's bumps, but I think all this cleanup work is having a real effect on the quality of the GC, and the ability for us to eventually implement a better core for it. There are still some warts here and there, and I'm perpetually unhappy that several <a href="https://trac.parrot.org/parrot/ticket/655">unused</a> and <a href="https://trac.parrot.org/parrot/ticket/490">unworking</a> code files can't be deleted yet, but it <span style="font-style: italic;">is</span> getting better.<br /><br />Today is the Parrot 1.2 release, and whenever a release comes up on the horizon I basically put all my work on hold. I don't want to be committing changes to trunk except bug fixes, and I know branches tend to get merged in before or after a release, so I try not to have one of those outstanding to avoid merger messes. I do my testing, report bugs, and do what I can to clean up low-hanging bug tickets.<br /><br />One particular ticket that had been stuck in my craw was a problem about subclassing an ExceptionHandler with a PIR-defined type. I had been examining the issue in the debugger for a while without finding anything that looked too out-of-the-ordinary. Finally yesterday I had my epiphany: The throw routine was attempting to access a non-inherited attribute in a way that wasn't throwing an exception. I added in <a href="https://trac.parrot.org/parrot/changeset/38884">a small fix to avoid this</a> and magically the test program started running as expected. There are definitely some limitations to this method of course, but it's a step in the right direction. It's worth noticing here that if the attribute in question was a <a href="http://wknight8111.blogspot.com/2009/05/turning-contexts-into-pmcs.html">Context PMC</a> instead of being a <code>struct Parrot_Constext *</code>, the attribute would be inheritable and everything would have worked as expected without much change. So that's more impetus for us to get that work under way ASAP.<br /><br />I'm the release manager for June, and will be pushing 1.3 out the door on the 16th. <a href="https://trac.parrot.org/parrot/wiki/GCTasklist">A few more GC fixes</a> for me to tackle after the release, and a few other grandios plans at the top of my task list are also scheduled for June. Plus, <a href="http://wknight8111.blogspot.com/2009/05/yapcna.html">I'm going to be at YAPC</a>. June is going to be quite the busy month for me!
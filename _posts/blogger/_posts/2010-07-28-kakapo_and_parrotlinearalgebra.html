---
layout: bloggerpost
title: Kakapo and Parrot-Linear-Algebra
publish: true
categories: [Parrot, Kakapo, Parrot-Linear-Algebra]
---

<a href="http://www.parrot.org/news/2010/Parrot-2.6.0">Parrot's 2.6 release is out</a> and now everybody is holding their breath in anticipation of the new <a href="http://github.com/rakudo/star">Rakudo Star </a>release tomorrow. I'm still fighting with my own release project: <a href="http://www.gitorious.com/kakapo/kakapo">Kakapo</a>.Kakapo got broken pretty severely when Parrot was changed to <a href="http://trac.parrot.org/parrot/ticket/389">no longer store methods in namespaces</a>, and I have been unable in several weeks to make it work again. Austin has been busy with other projects during this time too, so it's been me by my lonesome to try and get this thing working again.<br /><br />The problems are three-fold: First, Austin's plan for Kakapo was ambitious and the framework does a hell of a lot of things, not all of which I fully understand. Second, NQP and P6object have progressed in some significant ways since Kakapo was originally inked out, and much of the workaround code that Austin wrote to bypass some missing features no longer seems necessary. Third, we have this issue with methods not working nicely with NameSpaces anymore, which makes all of Kakapo's method-injection logic break.Without method injection happening, and happening early enough, all the code in Kakapo which relies on the new methods is broken.<br /><br />Tene put together a <a href="http://github.com/perl6/nqp-rx/commit/96bc19114a3962c356304c11b20768ef11fe91ba">patch for NQP</a> which allows methods marked "our" to be stored in NameSpaces again. This should simplify some of the new logic in Kakapo though I've been too busy in the past few days to test it. Hopefully this patch of his represents a large portion of the fix to get Kakapo working again. I doubt it will be everything that's necessary, but it will be a nice start.<br /><br />Without working Kakapo I haven't done any work whatsoever on <a href="http://github.com/Whiteknight/parrot-linear-algebra">Parrot-Linear-Algebra</a>. PLA uses Kakapo to implement all it's unit tests, and I'm happy enough with the new testing framework that I do not want to move it to use anything besides Kakapo. In the worst case I would consider trying to break out a testing sub-framework from Kakapo if we can't fix the entire framework, but I haven't gotten to that point yet and likely won't have the time for it in the near future. I would much rather fix the framework as a whole first, and then maybe talk about splitting out the unit test stuff into a separate sub-library later, if I still feel like that's a beneficial path to take.<br /><br />What I would really like to be doing is getting back into PLA development. I had hoped to get some wrappers together to make it work with Rakudo Star, but without working tests I haven't cut a suitable release and without a release it won't be included in the Rakudo Star bundle anyway. <br /><br />My hope is that within the next few days I can get Kakapo working again. At least I need it working enough that I can get the unit tests for PLA going. With Tene's fix, some hard work, and some trial-and-error I think it will be possible.
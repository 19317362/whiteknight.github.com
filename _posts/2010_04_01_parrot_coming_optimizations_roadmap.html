---
layout: bloggerpost
title: Parrot Coming Optimizations Roadmap
---

I've been thinking hard for the last few minutes about optimizations in Parrot, and I've decided upon a course of action that will give us maximum performance. Some of these performance gains come at the slight expense of developer effort, but I'm confident in the skills of the other Parrot developers and myself, I think we can make all these things happen before the much talked-about Parrot 4.0.<br /><br />First thing first: Parrot is extremely wasteful in terms of machine code complexity. It's no secret that we're using the bloated language standard C89 to implement the Parrot core VM. I estimate that we can increase processor-internal microcode prefetch efficiencies in most Intel processors if we cut down on the number of individual machine opcodes used in the compiled Parrot binary. There are plenty of ways we could to this. We could write a new optimization stage for GCC that limited generated machine code output to only about two dozen separate machine instructions. We could write our own compiler and then generate any machine code that we want. I've been planning a new PMC type that would effectively generate x86 machine code, so this might be a perfect use for that type. However, the option that I think would be the best overall is to rewrite some of the performance critical code in Parrot in a better language than C. If we picked a programming language that was developed and standardized before some of the more excessive and extravagant processor features were developed, we could avoid microcode caching and machine instruction prefetch costs entirely. The language I propose for this would be Fortran III.<br /><br />I'm sure some people are scratching their heads that this idea, but I'm convinced that it has merit. Fortran III was developed in 1958, and has had over 50 years of use, testing, and verification. That's 50 years of people writing compilers and optimizing them like crazy. Plus, it doesn't have all sorts of the extravagant and performance-robbing features that are killing Parrot in C89.
---
layout: bloggerpost
title: EmbedVideo MediaWiki extension
---

I've been doing a little bit of contract work lately on a mediawiki-based learning system. One of the features that was requested of this site was the ability to embed flash videos, primarily from <a href="http://youtube.com/">YouTube</a>, but also from other kid- and school-friendly hosting sites such as <a href="http://teachertube.com/">TeacherTube.com</a> and <a href="http://kidstube.com/">KidsTube.com</a>. KidsTube has since announced that they will be going offline soon, so support for them isn't particularly important now, but the idea still stands.<br /><br />I did a search on <a href="http://mediawiki.org/">mediawiki.org</a> to find a suitable embedding extension for flash videos. A few options pop up at the top of the results list, but I notice some strange similarities: EmbedVideo, EmbedVideo++, EmbedVideoPlus, all of which appear to be forks of the same original codebase. I also found at least two other independently-developed variants of the same extension in my searches.<br /><br />The original <a href="http://www.blogger.com/www.mediawiki.org/wiki/Extension:EmbedVideo">EmbedVideo extension</a> was developed by mediawiki hacker <a href="http://jimbojw.com/wiki/index.php?title=EmbedVideo_Extension">jimbojw</a> some time ago, but he has completely stopped maintaining it. In his absence, the EmbedVideo++ extension was forked off his work to add some new features. However, that extension has since been abandoned as well. Add another fork from yet another developer--EmbedVideoPlus--which has already not been modified in over a year. I saw two other variants as well which are almost identical minus some small additions but which weren't listed in the released extensions list. Neither of these look to be actively developed, at least not towards a larger goal of a generally more-useful extension.<br /><br />Where the story starts to get funny is that I had to make some of my own modifications to the extension, and was about two button clicks away from hosting my own version publicly when I had an insight: Why add another version, when I could try to take over maintainership of some (or all!) of the existing versions? Two of them are listed as "abandoned" on the mediawiki.org website. One other hasn't been modified in over a year. Two more are slightly more recent but by no means under active development. Each developer has done just enough work to get their own changes added, but stopped active development as soon as that was complete. I think I can do a little better than that. At the very least, I can put the project into some kind of public source control and make sure it gets exposure and some level of development sanity.<br /><br />So, Sunday afternoon I sent out a handful of emails to the involved developers: I would like to take over the project, merge all the variants together into a single extension, throw it up on github, do some new development, and actively maintain it. I've only received a reply back from Jimbojw so far, but he seemed enthusiastic.<br /><br />Yesterday I created <a href="http://github.com/Whiteknight/mediawiki-embedvideo">a project on Github</a> and uploaded some initial files. The original EmbedVideo.php file with some modest modifications, LICENSE, CREDITS, and README files, and some other related stuff. I've got a few big TODO items that I want to tackle in the coming weeks and months:<br /><ol><li>Refactor the code to follow current best practices</li><li>Test the code to work with newest development versions of MediaWiki. I've heard some reports that there are some incompatibilities.</li><li>Add proper i18n support.</li><li>Use, where possible, a dedicated javascript library for the purpose such as <a href="http://code.google.com/p/swfobject/">SWFObject</a>. </li><li>Add in some support for new video hosting websites</li><li>Add in some other bits and pieces from the other extension forks, as possible.</li></ol>I'm hoping to get some nice cleanup work started, and maybe get a few items ticked off this list soon so I can cut a new public release of the extension.<br /><br />I'll post more news and updates as development progresses.
                <div class='old-blogger-comments'>
                    <h2 class='old-comment-header'>Comments</h3>
                <div class='blogger-comment-div'>
                <p class='blogger-comment-body'>
                    Thanks Andrew,<br /><br />I think the reason you see so many variants is probably my delinquency in adding requested features.<br /><br />Backstory: before I made EmbedVideo, there was an extension (or two) for embedding YouTube videos.  These were not to my satisfaction (having XSS vulnerabilities, lack of size controls, etc), so I wrote the YouTubeTag extension.<br /><br />Even this was insufficient, however, since all the YouTube extensions (including mine) suffered from at least three drawbacks:<br /><br />1. They were extension tags, rather than parser functions, so they couldn't be used in conjunction with templates.  Parser functions were a new technology at this time.<br /><br />2. They only supported YouTube, and at the time there were several competing sites in the video hosting space whose videos I wanted to display.<br /><br />3. They had no configuration options to enable extending them to other services, short of modifying the source.<br /><br />I set out to write #ev to solve these problems.  I implemented a simple parser tag, created a default list of video service providers, and provided a mechanism for adding more.<br /><br />Having achieved my goals, I stopped work on it.  It was good enough for me.  When other people had requests, I would ignore them, more or less, because I didn't personally need that functionality.<br /><br />As a result, other developers took up the flag, creating their own variants.  And in like fashion, when they had made their changes, they ceased development because it did what they wanted.<br /><br />I'm happy that you're interested in supporting the project for the common good.  The best place to store the code would probably be in the mediawiki svn repo, if you have access.<br /><br />If not, I think you could make a good case for having access, as your cause is noble, and the extensions involved have a long history and wide use.<br /><br />Good luck!
                </p>
                <div class='blogger-comment-author-div'>
                    <span class='blogger-author-sig'><a class='blogger-author-uri' href='http://www.blogger.com/profile/01150872829875618738'>jimbojw</a>

                    <span class='blogger-comment-datestamp'>
                        5/13/2010 3:57:28 PM
                    </span>
                </div>
            </div>
            <div class='blogger-comment-div'>
                <p class='blogger-comment-body'>
                    Thanks for the comment, Jim! I definitely know what you are talking about, once a piece of software does what you need it to do, there's no real sense in developing it any further.<br /><br />I plan to be making some use of this extension, and I do see a real opportunity here. After all, if I'm going to expend the effort, I may as well just do it correctly. Plus, if the code gets into a public source code repository and other contributors get empowered to work on it with me, I hope that when my motivation to work on it ends that it won't go dormant again.<br /><br />I have the code at github now, it's an environment where I do a lot of other work and I feel comfortable working there. Getting the code into the mediawiki svn repo might be nice eventually too, since we could make tags that link versions of EmbedVideo to the versions of MediaWiki that they work against. Plus, the extension would get plenty of exposure and testing if it was there as well.
                </p>
                <div class='blogger-comment-author-div'>
                    <span class='blogger-author-sig'><a class='blogger-author-uri' href='http://www.blogger.com/profile/16207472474429254890'>Whiteknight</a>

                    <span class='blogger-comment-datestamp'>
                        5/13/2010 6:48:19 PM
                    </span>
                </div>
            </div>
            </div>
